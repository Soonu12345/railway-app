<div class="container">
  <form  #trainBtwStationsForm="ngForm" name="trainBtwStationsForm" (ngSubmit)="trainBtwStations(trainBtwStationsForm.value)">
    <div class="row">
      <div class="mx-auto">
        <div class="input-group">
          <div class="from-source">

              <input id="typeahead-template" type="text" 
              class="form-control no-border-radious" [(ngModel)]="fromstation" 
              [ngbTypeahead]="fromStation" name="fromstation" placeholder="*Starting from..." 
              (input)="getStations($event.target.value)" [resultTemplate]="rt"
              [resultFormatter]="formatter" />
              
          </div>
          <span><img src="assets/twoway.png" class="two-way-icon" (click)="replaceStations(fromstation, tostation)"></span>

          <span class="input-group-btn to-source">
            <input id="typeahead-format" type="text"
            class="no-border-radious form-control padding-left-20" [(ngModel)]="tostation"
            [ngbTypeahead]="toStation" name="tostation" placeholder="*Going to..." 
            [resultFormatter]="formatter"
            (input)="getStations($event.target.value)" />

          </span>
          <span class="input-group-btn margin-left-5">
            <input class="form-control no-border-radious" placeholder="*yyyy-mm-dd" (click)="d.toggle()"
            name="dp" [(ngModel)]="model" ngbDatepicker #d="ngbDatepicker">
          </span>
          <span class="input-group-btn margin-left-5">
            <button class="btn no-border-radious btn-secondary train-search-btn" type="submit">Search</button>
          </span>
        </div>
        <div class="error-message" *ngIf="trainBtwStationsForminvalid">Please fill all Required fields.</div>
      </div>
    </div>
  </form>
    
  <div style="margin-top:30px;">
    <div class="text-center">
      <h3 *ngIf="noTrainsFound" class="error-message">No trains found in this route</h3>
    </div>
    <ngb-accordion #acc="ngbAccordion" class="custom-accordion">
      <ngb-panel *ngFor="let train of trainsData?.trains">
      <ng-template ngbPanelTitle>
        <div class="row">

          <div class="col-md-3">
            <div style="color:black">Train Number</div>
            <div style="color: #8A63DF;">{{train.number}}</div>
          </div>
          
          <div class="col-md-3">
            <div style="color:black">Train Name</div>
            <div style="color: #8A63DF;">{{train.name}}</div>
          </div>
          
          <div class="col-md-3">
            <div style="color:black">Starting Point</div>
            <div style="color: #8A63DF;">{{train.from_station?.name}}</div>
          </div>
    
          <div class="col-md-3">
            <div style="color:black">End Point</div>
            <div style="color: #8A63DF;">{{train.to_station?.name}}</div>
          </div>
          <img src="assets/chevron-arrow-down.svg" width="15" height="15" style="margin-left: -45px;margin-top: 12px;">
        </div>
      </ng-template>
      <ng-template ngbPanelContent>
        <div class="row" style="margin-bottom:20px;">
          <div class="col-md-4">
            <div><b>Total Travelling Time</b></div>
            <div>{{train.travel_time}}</div>
          </div>
          <div class="col-md-4">
            <div><b>Source Departure Time</b></div>
            <div>{{train.src_departure_time}}</div>
          </div>
          <div class="col-md-4">
            <div><b>Destination Arrival Time</b></div>
            <div>{{train.dest_arrival_time}}</div>
          </div>
        </div>
        <div class="row"  style="margin-bottom:20px;">
          <div class="col-md-4">
            <div><b>This train will run on</b></div>
            <span *ngFor="let day of train.days">
              <span style="width:40px;display:inline-block">{{day.code}}</span>
              <span *ngIf="day.runs==='Y'">
                <i class="fa fa-check" style="color: blue;"></i>
              </span>
              <span *ngIf="day.runs==='N'">
                  <i class="fa fa-times" style="color: red;"></i>
              </span>
              <br>
            </span>
          </div>
          <div class="col-md-4">
            <div><b>Available Classes</b></div>
            <span *ngFor="let class of train.classes">
              <span><b>{{class.code}}: </b></span>
              <span>{{class.name}}</span>
              <br>
            </span>
          </div>
        </div>
      </ng-template>
    </ngb-panel>
  </ngb-accordion>
</div>
  

</div>